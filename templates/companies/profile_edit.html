{% extends 'base.html' %}
{% load static %}

{% block title %}Editar Perfil - {{ company.name }} | Meraki{% endblock %}

{% block extra_css %}
<style>
    .form-section {
        background: white;
        border-radius: 12px;
        border: 1px solid rgba(139, 127, 184, 0.1);
        transition: all 0.3s ease;
    }
    
    .form-section:hover {
        box-shadow: 0 4px 12px rgba(139, 127, 184, 0.1);
        border-color: rgba(139, 127, 184, 0.2);
    }
    
    .logo-upload-area {
        border: 2px dashed #d1d5db;
        border-radius: 12px;
        background: #f9fafb;
        transition: all 0.3s ease;
    }
    
    .logo-upload-area:hover {
        border-color: #8b7fb8;
        background: #f3f4f6;
    }
    
    .logo-upload-area.dragover {
        border-color: #8b7fb8;
        background: #ede9fe;
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Header -->
    <div class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="py-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900">Editar Perfil</h1>
                        <p class="text-gray-600 mt-1">
                            Actualiza la información de tu empresa
                        </p>
                    </div>
                    
                    <div class="flex space-x-3">
                        <a href="{% url 'companies:profile' %}" 
                           class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors duration-200">
                            <i class="fas fa-arrow-left mr-2"></i>
                            Volver al Perfil
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <!-- Información Básica -->
            <div class="form-section p-6 mb-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">
                    <i class="fas fa-building text-meraki-500 mr-2"></i>
                    Información Básica
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="id_name" class="block text-sm font-medium text-gray-700 mb-2">
                            Nombre de la Empresa *
                        </label>
                        <input type="text" 
                               name="name" 
                               id="id_name"
                               value="{{ form.name.value|default:'' }}"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-meraki-500 focus:border-meraki-500 transition-colors"
                               required>
                        {% if form.name.errors %}
                            <p class="text-red-500 text-xs mt-1">{{ form.name.errors.0 }}</p>
                        {% endif %}
                    </div>
                    
                    <div>
                        <label for="id_industry" class="block text-sm font-medium text-gray-700 mb-2">
                            Industria
                        </label>
                        <select name="industry" 
                                id="id_industry"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-meraki-500 focus:border-meraki-500 transition-colors">
                            <option value="">Selecciona una industria</option>
                            <option value="technology" {% if form.industry.value == 'technology' %}selected{% endif %}>Tecnología</option>
                            <option value="finance" {% if form.industry.value == 'finance' %}selected{% endif %}>Finanzas</option>
                            <option value="healthcare" {% if form.industry.value == 'healthcare' %}selected{% endif %}>Salud</option>
                            <option value="education" {% if form.industry.value == 'education' %}selected{% endif %}>Educación</option>
                            <option value="retail" {% if form.industry.value == 'retail' %}selected{% endif %}>Retail</option>
                            <option value="manufacturing" {% if form.industry.value == 'manufacturing' %}selected{% endif %}>Manufactura</option>
                            <option value="consulting" {% if form.industry.value == 'consulting' %}selected{% endif %}>Consultoría</option>
                            <option value="marketing" {% if form.industry.value == 'marketing' %}selected{% endif %}>Marketing</option>
                            <option value="other" {% if form.industry.value == 'other' %}selected{% endif %}>Otro</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="id_size" class="block text-sm font-medium text-gray-700 mb-2">
                            Tamaño de la Empresa
                        </label>
                        <select name="size" 
                                id="id_size"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-meraki-500 focus:border-meraki-500 transition-colors">
                            <option value="">Selecciona el tamaño</option>
                            <option value="startup" {% if form.size.value == 'startup' %}selected{% endif %}>Startup (1-10 empleados)</option>
                            <option value="small" {% if form.size.value == 'small' %}selected{% endif %}>Pequeña (11-50 empleados)</option>
                            <option value="medium" {% if form.size.value == 'medium' %}selected{% endif %}>Mediana (51-200 empleados)</option>
                            <option value="large" {% if form.size.value == 'large' %}selected{% endif %}>Grande (201-1000 empleados)</option>
                            <option value="enterprise" {% if form.size.value == 'enterprise' %}selected{% endif %}>Corporativa (1000+ empleados)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="id_employee_count" class="block text-sm font-medium text-gray-700 mb-2">
                            Número de Empleados
                        </label>
                        <input type="number" 
                               name="employee_count" 
                               id="id_employee_count"
                               value="{{ form.employee_count.value|default:'' }}"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-meraki-500 focus:border-meraki-500 transition-colors"
                               placeholder="Número exacto de empleados">
                    </div>
                </div>
            </div>

            <!-- Descripción -->
            <div class="form-section p-6 mb-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">
                    <i class="fas fa-edit text-blue-500 mr-2"></i>
                    Descripción de la Empresa
                </h2>
                
                <div>
                    <label for="id_description" class="block text-sm font-medium text-gray-700 mb-2">
                        Acerca de la Empresa
                    </label>
                    <textarea name="description" 
                              id="id_description"
                              rows="6"
                              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-meraki-500 focus:border-meraki-500 transition-colors"
                              placeholder="Describe tu empresa, su misión, valores y cultura...">{{ form.description.value|default:'' }}</textarea>
                    <p class="text-xs text-gray-500 mt-1">
                        Una buena descripción ayuda a los candidatos a conocer mejor tu empresa
                    </p>
                </div>
            </div>

            <!-- Información de Contacto -->
            <div class="form-section p-6 mb-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">
                    <i class="fas fa-map-marker-alt text-green-500 mr-2"></i>
                    Información de Contacto y Ubicación
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="id_website" class="block text-sm font-medium text-gray-700 mb-2">
                            Sitio Web
                        </label>
                        <input type="url" 
                               name="website" 
                               id="id_website"
                               value="{{ form.website.value|default:'' }}"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-meraki-500 focus:border-meraki-500 transition-colors"
                               placeholder="https://www.tuempresa.com">
                        {% if form.website.errors %}
                            <p class="text-red-500 text-xs mt-1">{{ form.website.errors.0 }}</p>
                        {% endif %}
                    </div>
                    
                    <div>
                        <label for="id_location" class="block text-sm font-medium text-gray-700 mb-2">
                            Ubicación
                        </label>
                        <input type="text" 
                               name="location" 
                               id="id_location"
                               value="{{ form.location.value|default:'' }}"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-meraki-500 focus:border-meraki-500 transition-colors"
                               placeholder="Ciudad, País">
                    </div>
                    
                    <div class="md:col-span-2">
                        <label for="id_founded_year" class="block text-sm font-medium text-gray-700 mb-2">
                            Año de Fundación
                        </label>
                        <input type="number" 
                               name="founded_year" 
                               id="id_founded_year"
                               value="{{ form.founded_year.value|default:'' }}"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-meraki-500 focus:border-meraki-500 transition-colors"
                               placeholder="2020"
                               min="1800"
                               max="2025">
                    </div>
                </div>
            </div>

            <!-- Botones de Acción -->
            <div class="flex justify-between items-center p-6 bg-white rounded-lg border border-gray-200">
                <a href="{% url 'companies:profile' %}" 
                   class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Cancelar
                </a>
                
                <button type="submit" 
                        class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-meraki-600 to-meraki-500 text-white font-semibold rounded-lg hover:from-meraki-700 hover:to-meraki-600 transform hover:scale-105 transition-all duration-200">
                    <i class="fas fa-save mr-2"></i>
                    Guardar Cambios
                </button>
            </div>
        </form>
    </div>
</div>

<script>
// Auto-resize textarea
document.addEventListener('DOMContentLoaded', function() {
    const textarea = document.getElementById('id_description');
    
    function resizeTextarea() {
        textarea.style.height = 'auto';
        textarea.style.height = textarea.scrollHeight + 'px';
    }
    
    textarea.addEventListener('input', resizeTextarea);
    resizeTextarea(); // Initial resize
});
</script>
{% endblock %}