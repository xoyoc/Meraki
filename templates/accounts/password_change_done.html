<!-- ===== password_change_done.html ===== -->
{% extends 'base.html' %}
{% load static %}

{% block title %}Contraseña Actualizada | Meraki - Capital Humano en Acción{% endblock %}

{% block extra_css %}
<style>
    .success-gradient {
        background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
    }
    
    .success-card {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.95);
        box-shadow: 0 25px 50px -12px rgba(16, 185, 129, 0.25);
    }
    
    @keyframes success-bounce {
        0% { transform: scale(0.3); opacity: 0; }
        50% { transform: scale(1.05); }
        70% { transform: scale(0.9); }
        100% { transform: scale(1); opacity: 1; }
    }
    
    .success-animation {
        animation: success-bounce 0.8s ease-out;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
    }
    
    .floating-element {
        animation: float 6s ease-in-out infinite;
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen success-gradient flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative overflow-hidden">
    <!-- Elementos decorativos -->
    <div class="absolute top-20 left-10 w-20 h-20 bg-white opacity-10 rounded-full floating-element"></div>
    <div class="absolute top-40 right-20 w-16 h-16 bg-white opacity-15 rounded-full floating-element" style="animation-delay: 2s;"></div>
    <div class="absolute bottom-20 left-1/4 w-12 h-12 bg-white opacity-20 rounded-full floating-element" style="animation-delay: 4s;"></div>
    
    <div class="relative sm:mx-auto sm:w-full sm:max-w-md">
        <div class="success-card rounded-2xl p-8 border border-white border-opacity-20 text-center">
            <!-- Icono de éxito animado -->
            <div class="mx-auto w-24 h-24 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center mb-6 success-animation">
                <i class="fas fa-shield-alt text-white text-3xl"></i>
            </div>
            
            <h2 class="text-2xl font-bold text-gray-900 mb-4">
                ¡Contraseña Actualizada!
            </h2>
            
            <p class="text-gray-600 mb-8 leading-relaxed">
                Tu contraseña ha sido cambiada exitosamente. Tu cuenta ahora es más segura.
            </p>
            
            <!-- Información de seguridad -->
            <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                <div class="flex items-center justify-center text-green-800 mb-2">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span class="font-medium">Cambio Confirmado</span>
                </div>
                <p class="text-sm text-green-700">
                    Se ha enviado una notificación de confirmación a tu correo electrónico.
                </p>
            </div>
            
            <!-- Acciones -->
            <div class="space-y-4">
                <a href="{% url 'accounts:profile' %}" 
                   class="w-full inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 transition-all duration-200 transform hover:scale-105">
                    <i class="fas fa-user mr-2"></i>
                    Volver al Perfil
                </a>
                
                <a href="{% url 'accounts:settings' %}" 
                   class="w-full inline-flex justify-center items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200">
                    <i class="fas fa-cog mr-2"></i>
                    Configuración de Seguridad
                </a>
            </div>
        </div>
        
        <!-- Consejos adicionales -->
        <div class="mt-8 text-center">
            <div class="bg-white bg-opacity-20 rounded-xl p-4 text-white text-sm">
                <div class="flex items-center justify-center mb-2">
                    <i class="fas fa-lightbulb mr-2"></i>
                    <span class="font-medium">Consejo de Seguridad</span>
                </div>
                <p class="opacity-90">
                    Te recomendamos cerrar sesión en todos los dispositivos si sospechas que tu cuenta pudo haber sido comprometida.
                </p>
            </div>
        </div>
    </div>
</div>

<script>
// Auto-redirect después de 10 segundos (opcional)
let countdown = 10;
const redirectMsg = document.createElement('div');
redirectMsg.className = 'fixed bottom-4 right-4 bg-white bg-opacity-90 text-gray-800 px-4 py-2 rounded-lg shadow-lg text-sm';
redirectMsg.innerHTML = `
    <div class="flex items-center">
        <i class="fas fa-clock mr-2"></i>
        <span>Redirigiendo al perfil en <span id="countdown">${countdown}</span>s</span>
        <button onclick="cancelRedirect()" class="ml-3 text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
        </button>
    </div>
`;

let redirectTimer;
let countdownTimer;

function startRedirect() {
    document.body.appendChild(redirectMsg);
    
    countdownTimer = setInterval(() => {
        countdown--;
        document.getElementById('countdown').textContent = countdown;
        
        if (countdown <= 0) {
            clearInterval(countdownTimer);
            window.location.href = "{% url 'accounts:profile' %}";
        }
    }, 1000);
}

function cancelRedirect() {
    clearInterval(countdownTimer);
    document.body.removeChild(redirectMsg);
}

// Iniciar countdown después de 3 segundos
setTimeout(startRedirect, 3000);
</script>
{% endblock %}